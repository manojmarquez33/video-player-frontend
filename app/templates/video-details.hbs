<link rel="stylesheet" href="assets/css/video-details.css">
<link rel="icon" type="image/png" href="assets/images/video-player.png">
<a href="/" class="back-button">&#8592; Back</a>

<div class="container">
  <div class="left-section">
    <div class="video-container">
      <div class="video-wrapper">
        <div id="circleLoader" class="loading-spinner hidden"></div>

        <video id="videoPlayer" controls>
          <!-- Subtitle track will be dynamically added in JavaScript -->
        </video>
      </div>

      <div class="video-controls">
        <div class="video-buttons">
          <span id="currentTime">0:00</span>

          <button {{action "togglePlay"}} id="playPause">
            {{#if isPlaying}}
              ⏸
            {{else}}
              ▶
            {{/if}}
          </button>

          <button {{action "skipBackward"}}>◁</button>
          <button {{action "skipForward"}}>▷</button>
          <button {{action "fastRewind"}}>⏮</button>
          <button {{action "fastForward"}}>⏭</button>

          <select id="playbackSpeed" {{action "setPlaybackSpeedFromDropdown" on="change"}} >
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="1.5">1.5x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>

          <input
            type="range"
            id="volumeBar"
            value="1"
            min="0"
            max="1"
            step="0.01"
            {{action "setVolume" value="value" on="input"}}
          />

          <button {{action "zoomIn"}}>+</button>
          <button {{action "zoomOut"}}>-</button>
          <button {{action "resetVideo"}}>Reset</button>

          <button {{action "toggleFullScreen"}}>⛶</button>
          <span id="totalTime">0:00</span>
        </div>

        <div class="video-progress">
          <input
            type="range"
            id="videoBar"
            class="video-seek-bar"
            value="0"
            min="0"
            max="100"
            step="0.1"
          >
        </div>
      </div>
    </div>

    <div class="video-details">
      <p><strong>Video Name:</strong> {{model.fileName}}</p>
      <p><strong>Size:</strong> {{model.size}}</p>
      <p><strong>Duration:</strong> <span id="videoDuration">{{model.videoDuration}}</span></p>
    </div>

    <!-- New Subtitle Controls -->
    <div class="subtitle-controls">
      <label for="subtitleToggle">Subtitles:</label>
      <select id="subtitleToggle">
          <option value="on">On</option>
          <option value="off" selected>Off</option>
      </select>

    </div>

  </div>

  <div class="right-section">
    <div class="button-controls">
      <div class="skip-control">
        <label for="skipInput">Skip</label>
        <input type="number" id="skipInput" placeholder="Enter seconds" />
        <button {{action "skipToSec"}}>Skip</button>
      </div>
      <div class="group">
        <button {{action "downloadFrame"}}>Download Frame</button>
        <button {{action "convertBlackAndWhite"}}>Black & White</button>
      </div>
      <div class="group">
        <button {{action "downloadMP3"}}>Download MP3</button>
        <button {{action "toggleSubtitle"}}>Subtitle</button>
      </div>
    </div>
  </div>
</div>
